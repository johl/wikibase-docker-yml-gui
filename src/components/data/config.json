{
    "name": "BlubberForm",
    "form": {
          "title":"title",
          "subtitle": "subtitle",
          "nextButtonText": "nextButton",
          "backButtonText": "backButton",
          "finishButtonText" : "finishButton",
          "stepSize": "xs",
          "shape": "tab",
          "color": "#3366cc",
          "errorColor": "#f81717",
          "transition": "fade",
          "startIndex": 0,
          "onComplete": "done"
    },
    "steps":[ {
            "name":"prolog",
            "description": "prolog_description",
            "icon": "settings",
            "options": {
              "validationErrorClass": "has-error",
              "validationSuccessClass": "has-success",
              "validateAfterChanged": true
            },
            "fields":[{
              "name": "defaultSettings",
              "type": "submit",
              "onSubmit": "jumpToTheEnd"
            }]
            },{
            "name":"generalSettings",
            "icon": "settings",
            "options": {
                    "validationErrorClass": "has-error",
                    "validationSuccessClass": "has-success",
                    "validateAfterChanged": true
            },
            "fields":[ {
                "name": "steps",
                "type": "pick",
                "required": true,
                "default": [ "Wikibase", "Quickstatements", "Query service", "WDQS-Proxy", "WDQS-UI", "WDQS-Updater" ],
                "values": [ "Wikibase", "Quickstatements", "Query service", "WDQS-Proxy", "WDQS-UI", "WDQS-Updater" ]
              }
            ]
        },{
              "name":"mediawiki",
              "icon": "settings",
              "beforeChange": "validateMediaWiki",
              "options": {
                "validationErrorClass": "has-error",
                "validationSuccessClass": "has-success",
                "validateAfterChanged": true
              },
              "fields":[{
                  "name": "mediawikiAdminName",
                  "type": "text",
                  "default": "admin",
                  "required": true,
                  "help": "",
                  "hint": ""
                },{
                  "name": "mediawikiAdminPassword",
                  "type": "password",
                  "default": "adminpass",
                  "required": true,
                  "help": "",
                  "hint": "",
                  "buttons": [
                      {
                        "label": "showPassword",
                        "action": "showMWAdminPassword"
                      },
                      {
                        "label": "generatePassword",
                        "action": "generateMWAdminPassword"
                      }
                  ]
              }]
        },{
              "name":"database",
              "icon": "settings",
              "beforeChange": "validateDatabase",
              "options": {
                "validationErrorClass": "has-error",
                "validationSuccessClass": "has-success",
                "validateAfterChanged": true
              },
              "fields":[{
                "name": "databaseAlias",
                "type": "text",
                "default": "mysql",
                "required": true,
                "help": ""
              },{
                "name": "databaseName",
                "type": "text",
                "default": "my_wiki",
                "required": true,
                "help": "",
                "hint": ""
              },{
                "name": "databaseUser",
                "type": "text",
                "default": "wikiuser",
                "required": true,
                "help": "",
                "hint": ""
              },{
                  "name": "databaseUserPassword",
                  "type": "password",
                  "default": "sqlpass",
                  "required": true,
                  "help": "",
                  "hint": "",
                  "buttons": [
                    {
                      "label": "showPassword",
                      "action": "showDBPassword"
                    },
                    {
                      "label": "generatePassword",
                      "action": "generateDBAdminPassword"
                    }
                  ]
              }],
              "template": "mysql:\nimage: mariadb:latest\nrestart: always\nvolumes:\n- mediawiki-mysql-data:/var/lib/mysql\nenvironment:\nMYSQL_DATABASE: {databaseName}\nMYSQL_USER: {databaseUser}\nMYSQL_PASSWORD: {databaseUserPassword}\nMYSQL_RANDOM_ROOT_PASSWORD: 'yes'\nnetworks:\ndefault:\naliases:\n- {databaseAlias}.svc"
        },{
              "name":"wikibase",
              "icon": "settings",
              "beforeChange": "validateWikibase",
              "options": {
                  "validationErrorClass": "has-error",
                  "validationSuccessClass": "has-success",
                  "validateAfterChanged": true
              },
              "fields":[{
                          "name": "wikibaseAlias",
                          "type": "text",
                          "default": "wikibase",
                          "required": true,
                          "help": ""
                      },{
                          "name": "wikibasePort",
                          "type": "number",
                          "default": "8181",
                          "help": "",
                          "hint": "",
                          "required": true
                      }
              ],
              "template": "wikibase:\nimage: wikibase/wikibase:1.30-bundle\nbuild:\ncontext: ./wikibase/1.30/bundle\ndockerfile: Dockerfile\nlinks:\n- mysql\nports:\n- \"{wikibasePort}:80\"\nvolumes:\n- mediawiki-images-data:/var/www/html/images\ndepends_on:\n- mysql\n- elasticsearch\nnetworks:\ndefault:\naliases:\n- {wikibaseAlias}.svc\nenvironment:\n- DB_SERVER={databaseAlias}.svc:3306\n- DB_USER={databaseUser}\n- DB_PASS={databaseUserPassword}\n- DB_NAME={databaseName}\n- MW_ADMIN_NAME={mediawikiAdminName}\n- MW_ADMIN_PASS={mediawikiAdminPassword}\n- MW_WG_SECRET_KEY={secretkey}\n- MW_ELASTIC_HOST=elasticsearch.svc\n- MW_ELASTIC_PORT=9200"
        },{
              "name": "wikibaseQuickstatements",
              "beforeChange": "validateWikibaseQuickstatements",
              "description": "wikibaseQuickstatements_description",
              "icon": "settings",
              "options": {
                "validationErrorClass": "has-error",
                "validationSuccessClass": "has-success",
                "validateAfterChanged": true
              },
              "fields":[{
                    "name": "wikibaseQuickstatementsAlias",
                    "type": "text",
                    "default": "quickstatements",
                    "required": false,
                    "help": "help me",
                    "hint": "what a hint",
                    "styleClasses":"col-xs-3"
                  },{
                    "name": "wikibaseQuickstatementsPort",
                    "type": "number",
                    "default": "9191",
                    "help": "",
                    "hint": "",
                    "required": true
                  },{
                    "name": "wikibaseAlias",
                    "condition": "isWikibseAliasSet",
                    "type": "text",
                    "default": "wikibase",
                    "required": true,
                    "help": "help me",
                    "hint": "what a hint",
                    "styleClasses":"col-xs-3"
                  },{
                    "name": "wikibasePort",
                    "type": "number",
                    "default": "8181",
                    "help": "",
                    "hint": "",
                    "required": true
                  },{
                      "name": "wikibaseQuickstatementsNamespaceProperty",
                      "type": "text",
                      "default": "122",
                      "help": "",
                      "hint": "",
                      "required": true
                    },{
                    "name": "wikibaseQuickstatementsPrefixProperty",
                    "type": "text",
                    "default": "Property",
                    "help": "",
                    "hint": "",
                    "required": true
                  },{
                    "name": "wikibaseQuickstatementsNamespaceItem",
                    "type": "text",
                    "default": "120",
                    "required": false,
                    "help": "help me",
                    "hint": "what a hint",
                    "styleClasses":"col-xs-3"
                  },{
                    "name": "wikibaseQuickstatementsPrefixItem",
                    "type": "text",
                    "default": "Item",
                    "help": "",
                    "hint": "",
                    "required": true
                  }
              ],
            "template":"quickstatements:\nimage: wikibase/quickstatements:latest\nbuild:\ncontext: ./quickstatements/latest\ndockerfile: Dockerfile\nports:\n- \"{wikibaseQuickstatementsPort}:80\"\ndepends_on:\n- wikibase\nnetworks:\ndefault:\naliases:\n- {wikibaseQuickstatementsAlias}.svc\nenvironment:\n- OAUTH_CONSUMER_KEY=559fcf1da153c5ec4b2fbefa7c3c395b\n- OAUTH_CONSUMER_SECRET=57cad33da0015dce1e94a597908e19848714a6af\n- QS_PUBLIC_SCHEME_HOST_AND_PORT=http://localhost:{wikibaseQuickstatementsPort}\n- WB_PUBLIC_SCHEME_HOST_AND_PORT=http://localhost:{wikibasePort}\n- WIKIBASE_SCHEME_AND_HOST=http://{wikibaseAlias}.svc\n- WB_PROPERTY_NAMESPACE={wikibaseQuickstatementsNamespaceProperty}\n- \"WB_PROPERTY_PREFIX={wikibaseQuickstatementsPrefixProperty}:\"\n- WB_ITEM_NAMESPACE={wikibaseQuickstatementsNamespaceItem}\n- \"WB_ITEM_PREFIX={wikibaseQuickstatementsPrefixItem}:\""
        },{
            "name": "wikibaseBlazegraph",
            "beforeChange": "validateWikibaseBlazegraph",
            "description": "wikibaseBlazegraph_description",
            "icon": "settings",
            "options": {
                "validationErrorClass": "has-error",
                "validationSuccessClass": "has-success",
                "validateAfterChanged": true
            },
            "fields":[{
                    "name": "wikibaseBlazegraphAlias",
                    "type": "text",
                    "default": "wdqs",
                    "required": false,
                    "help": "",
                    "hint": ""

                },{
                    "name": "wikibaseBlazegraphPort",
                    "type": "number",
                    "default": "9999",
                    "required": true,
                    "help": "",
                    "hint": ""
                },{
                    "name": "wikibaseAlias",
                    "condition": "isWikibseAliasSet",
                    "type": "text",
                    "default": "wikibase",
                    "required": true,
                    "help": "help me",
                    "hint": "what a hint",
                    "styleClasses":"col-xs-3"
                }
            ],
            "template":"wdqs:\nimage: wikibase/wdqs:0.3.0\nbuild:\ncontext: ./wdqs/0.3.0\ndockerfile: Dockerfile\nvolumes:\n- query-service-data:/wdqs/data\ncommand: /runBlazegraph.sh\nnetworks:\ndefault:\naliases:\n- {wikibaseBlazegraphAlias}.svc\nenvironment:\n- WIKIBASE_HOST={wikibaseAlias}.svc\n- WDQS_HOST={wikibaseBlazegraphAlias}.svc\n- WDQS_PORT={wikibaseBlazegraphPort}\nexpose:\n- {wikibaseBlazegraphPort}"
        },{
            "name": "wikibaseProxy",
            "beforeChange": "validateWikibaseProxy",
            "description": "wikibaseProxy_description",
            "icon": "settings",
            "options": {
              "validationErrorClass": "has-error",
              "validationSuccessClass": "has-success",
              "validateAfterChanged": true
            },
            "fields":[{
              "name": "wikibaseProxyAlias",
              "type": "text",
              "default": "wdqs-proxy",
              "required": false,
              "help": "",
              "hint": ""

            },{
              "name": "wikibaseProxyPort",
              "type": "number",
              "default": "8989",
              "required": true,
              "help": "",
              "hint": ""
            },{
              "name": "wikibaseBlazegraphAlias",
              "default": "wdqs",
              "type": "text",
              "required": false,
              "help": "",
              "hint": ""

            },{
              "name": "wikibaseBlazegraphPort",
              "type": "number",
              "default": "9999",
              "required": true,
              "help": "",
              "hint": ""
            }],
            "template":"wdqs-proxy:\nimage: wikibase/wdqs-proxy\nbuild:\ncontext: ./wdqs-proxy/latest\ndockerfile: Dockerfile\nenvironment:\n- PROXY_PASS_HOST={wikibaseBlazegraphAlias}.svc:{wikibaseBlazegraphPort}\nports:\n- \"{wikibaseProxyPort}:80\"\ndepends_on:\n- wdqs\nnetworks:\ndefault:\naliases:\n- {wikibaseProxyAlias}.svc"
        },{
          "name": "wikibaseUI",
          "beforeChange": "validateWikibaseUI",
          "description": "wikibaseUI_description",
          "icon": "settings",
          "options": {
            "validationErrorClass": "has-error",
            "validationSuccessClass": "has-success",
            "validateAfterChanged": true
          },
          "fields":[{
            "name": "wikibaseUIAlias",
            "default": "wdqs-frontend",
            "type": "text",
            "required": false,
            "help": "",
            "hint": ""

          },{
            "name": "wikibaseUIPort",
            "type": "number",
            "default": "8282",
            "required": true,
            "help": "",
            "hint": ""
          },{
            "name": "wikibaseAlias",
            "condition": "isWikibseAliasSet",
            "type": "text",
            "default": "wikibase",
            "required": true,
            "help": "help me",
            "hint": "what a hint",
            "styleClasses":"col-xs-3"
          },{
            "name": "wikibaseProxyAlias",
            "type": "text",
            "default": "wdqs-proxy",
            "required": false,
            "help": "",
            "hint": ""

          }],
          "template":"wdqs-frontend:\nimage: wikibase/wdqs-frontend:latest\nbuild:\ncontext: ./wdqs-frontend/latest\ndockerfile: Dockerfile\nports:\n- \"{wikibaseUIPort}:80\"\ndepends_on:\n- wdqs-proxy\nnetworks:\ndefault:\naliases:\n- {wikibaseUIAlias}.svc\nenvironment:\n- WIKIBASE_HOST={wikibaseAlias}.svc\n- WDQS_HOST={wikibaseProxyAlias}.svc"
        },{
          "name": "wdqs-updater",
          "beforeChange": "validateUpdater",
          "description": "wikibaseUI_description",
          "icon": "settings",
          "options": {
            "validationErrorClass": "has-error",
            "validationSuccessClass": "has-success",
            "validateAfterChanged": true
          },
          "fields":[{
            "name": "wikibaseUpdaterAlias",
            "type": "text",
            "default": "wdqs-updater",
            "required": true,
            "help": "help me",
            "hint": "what a hint",
            "styleClasses":"col-xs-3"
          },{
            "name": "wikibaseAlias",
            "condition": "isWikibseAliasSet",
            "type": "text",
            "default": "wikibase",
            "required": true,
            "help": "help me",
            "hint": "what a hint",
            "styleClasses":"col-xs-3"
          },{
            "name": "wikibaseBlazegraphAlias",
            "type": "text",
            "default": "wdqs",
            "required": false,
            "help": "",
            "hint": ""

          },{
            "name": "wikibaseBlazegraphPort",
            "type": "number",
            "default": "9999",
            "required": true,
            "help": "",
            "hint": ""
          }],
          "template":"wdqs-updater:\nimage: wikibase/wdqs:0.3.0\nbuild:\ncontext: ./wdqs/0.3.0\ndockerfile: Dockerfile\ncommand: /runUpdate.sh\ndepends_on:\n- {wikibaseAlias}\n- wikibase\nnetworks:\ndefault:\naliases:\n- {wikibaseAlias}.svc\nenvironment:\n- WIKIBASE_HOST={wikibaseAlias}.svc\n- WDQS_HOST={wikibaseBlazegraphAlias}.svc\n- WDQS_PORT={wikibaseBlazegraphPort}"
    },{
          "name": "complete",
          "description": "complete_description",
          "icon": "settings",
          "fields": [{
            "name": "showBeforeDownloadYml",
            "type": "submit",
            "onSubmit": "showYmlFile"
          }],
          "template": [
            "version: 3",
            "elasticsearch:\nimage: elasticsearch@sha256:f1dbf2019dc9a4ca5dd458635bfb31f9a601e4905e1d6ca1d65a3958d428f497\nnetworks:\ndefault:\naliases:\n- elasticsearch.svc\nenvironment:\ndiscovery.type: single-node\n",
            "volumes:\nmediawiki-mysql-data:\nmediawiki-images-data:\nquery-service-data:"
          ]
        }
    ]
}
